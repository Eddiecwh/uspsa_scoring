<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>USPSA Scoring App v2.0.1</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1><i class="fas fa-bullseye"></i> USPSA Scoring</h1>
        <p>HF Scoring System v2.0 - Eddie C. 8/15/25</p>
      </div>

      <!-- Bootstrap Toast Container -->
      <div
        class="toast-container position-fixed top-0 start-50 translate-middle-x p-3"
        id="toastContainer"
      ></div>

      <!-- Main Dashboard -->
      <div class="screen active" id="dashboard">
        <h2>Dashboard</h2>
        <div class="menu-grid">
          <div class="menu-card" onclick="showScreen('stage-setup')">
            <i class="fas fa-plus-circle"></i>
            <h3>New Stage</h3>
            <p>Create and configure a new stage</p>
          </div>
          <div class="menu-card" onclick="showScreen('stage-library')">
            <i class="fas fa-folder"></i>
            <h3>Stage Library</h3>
            <p>Manage saved stages</p>
          </div>
          <div class="menu-card" onclick="quickScore()">
            <i class="fas fa-stopwatch"></i>
            <h3>Quick Score</h3>
            <p>Score with default stage</p>
          </div>
          <div class="menu-card" onclick="showScreen('results')">
            <i class="fas fa-chart-bar"></i>
            <h3>Results</h3>
            <p>View scores and analytics</p>
          </div>
        </div>
      </div>

      <!-- Stage Setup -->
      <div class="screen" id="stage-setup">
        <div class="breadcrumb">
          <a href="#" onclick="showScreen('dashboard')">Dashboard</a> / Stage
          Setup
        </div>
        <h2>Stage Setup</h2>

        <div class="stage-setup-grid">
          <div>
            <div class="input-group">
              <label>Stage Name</label>
              <input
                type="text"
                id="stageName"
                placeholder="Enter stage name"
              />
            </div>

            <div class="input-group">
              <label>Paper Targets</label>
              <div class="counter">
                <button
                  class="counter-btn minus"
                  onclick="adjustCounter('paperTargets', -1)"
                >
                  -
                </button>
                <span class="counter-value" id="paperTargets">6</span>
                <button
                  class="counter-btn plus"
                  onclick="adjustCounter('paperTargets', 1)"
                >
                  +
                </button>
              </div>
            </div>

            <div class="input-group">
              <label>Steel Targets</label>
              <div class="counter">
                <button
                  class="counter-btn minus"
                  onclick="adjustCounter('steelTargets', -1)"
                >
                  -
                </button>
                <span class="counter-value" id="steelTargets">4</span>
                <button
                  class="counter-btn plus"
                  onclick="adjustCounter('steelTargets', 1)"
                >
                  +
                </button>
              </div>
            </div>
          </div>

          <div>
            <div class="input-group">
              <label>Max Points</label>
              <input type="number" id="maxPoints" value="90" readonly />
            </div>

            <div class="input-group">
              <label>Notes</label>
              <input
                type="text"
                id="stageNotes"
                placeholder="Stage description..."
              />
            </div>
          </div>
        </div>

        <div class="navigation">
          <button class="btn btn-secondary" onclick="showScreen('dashboard')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn" onclick="saveStage()">
            <i class="fas fa-save"></i> Save Stage
          </button>
          <button class="btn" onclick="startScoring()">
            <i class="fas fa-play"></i> Start Scoring
          </button>
        </div>
      </div>

      <!-- Stage Library -->
      <div class="screen" id="stage-library">
        <div class="breadcrumb">
          <a href="#" onclick="showScreen('dashboard')">Dashboard</a> / Stage
          Library
        </div>
        <h2>Stage Library</h2>

        <div class="stage-list" id="stageList">
          <!-- Stages will be populated here -->
        </div>

        <div class="navigation">
          <button class="btn btn-secondary" onclick="showScreen('dashboard')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn" onclick="showScreen('stage-setup')">
            <i class="fas fa-plus"></i> New Stage
          </button>
        </div>
      </div>

      <!-- Scoring Screen -->
      <div class="screen" id="scoring">
        <div class="breadcrumb">
          <a href="#" onclick="showScreen('dashboard')">Dashboard</a> /
          <a href="#" onclick="showScreen('stage-library')">Stages</a> / Scoring
        </div>
        <h2 id="currentStageName">Stage Name</h2>

        <div class="input-group">
          <label>Shooter Name</label>
          <input
            type="text"
            id="shooterName"
            placeholder="Enter shooter name"
          />
        </div>

        <div class="input-group">
          <label>Time (seconds)</label>
          <input
            type="number"
            id="shooterTime"
            placeholder="Enter time in seconds"
            step="0.01"
            min="0"
          />
        </div>

        <div class="steel-section">
          <h3><i class="fas fa-circle"></i> Steel Targets</h3>
          <div class="steel-grid" id="steelGrid">
            <!-- Steel targets will be populated here -->
          </div>
        </div>

        <div class="target-grid" id="targetGrid">
          <!-- Paper targets will be populated here -->
        </div>

        <div class="results-summary" id="resultsPreview" style="display: none">
          <h3>Score Preview</h3>
          <div class="hit-factor" id="hitFactorPreview">0.00</div>
          <p>
            Points: <span id="pointsPreview">0</span> | Time:
            <span id="timePreview">0.00</span>s
          </p>
        </div>

        <div class="navigation">
          <button
            class="btn btn-secondary"
            onclick="showScreen('stage-library')"
          >
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-danger" onclick="clearScore()">
            <i class="fas fa-trash"></i> Clear
          </button>
          <button class="btn" onclick="reviewScore()">
            <i class="fas fa-eye"></i> Review
          </button>
        </div>
      </div>

      <!-- Score Review Screen -->
      <div class="screen" id="score-review">
        <div class="breadcrumb">
          <a href="#" onclick="showScreen('dashboard')">Dashboard</a> /
          <a href="#" onclick="showScreen('stage-library')">Stages</a> /
          <a href="#" onclick="showScreen('scoring')">Scoring</a> / Review
        </div>
        <h2>Score Review</h2>

        <div class="review-summary">
          <h3 id="reviewStageName">Stage Name</h3>
          <h4 id="reviewShooterName">Shooter Name</h4>
        </div>

        <div class="review-table-container">
          <table class="review-table">
            <tbody id="reviewTableBody">
              <!-- Review data will be populated here -->
            </tbody>
          </table>
        </div>

        <div class="navigation">
          <button class="btn btn-secondary" onclick="showScreen('scoring')">
            <i class="fas fa-arrow-left"></i> Back to Scoring
          </button>
          <button class="btn" onclick="finalSaveScore()">
            <i class="fas fa-save"></i> Save Score
          </button>
        </div>
      </div>

      <!-- Results -->
      <div class="screen" id="results">
        <div class="breadcrumb">
          <a href="#" onclick="showScreen('dashboard')">Dashboard</a> / Results
        </div>
        <h2>Results & Analytics</h2>

        <div class="input-group">
          <label>Filter by Stage</label>
          <select id="stageFilter" onchange="loadResults()">
            <option value="">All Stages</option>
          </select>
        </div>

        <div id="resultsContent">
          <p>No scores recorded yet. Start scoring to see results here!</p>
        </div>

        <div class="navigation">
          <button class="btn btn-secondary" onclick="showScreen('dashboard')">
            <i class="fas fa-arrow-left"></i> Back
          </button>
          <button class="btn" onclick="exportResults()">
            <i class="fas fa-download"></i> Export Results
          </button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
